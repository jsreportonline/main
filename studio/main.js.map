{"version":3,"sources":["webpack:///webpack/bootstrap 9018f6f36d6bdf740b21","webpack:///./studio/main_dev.js","webpack:///external \"Studio\"","webpack:///./studio/BillingEditor.js","webpack:///external \"Studio.libraries['react-list']\"","webpack:///external \"Studio.libraries['react']\"","webpack:///./studio/UpgradePlanModal.js","webpack:///external \"Studio.libraries['superagent']\"","webpack:///./studio/BillingButton.js","webpack:///./studio/ChangePasswordSettingsButton.js","webpack:///./studio/ChangePasswordModal.js"],"names":["addEditorComponent","previewListeners","push","setTimeout","api","get","response","authentication","user","creditsUsed","tenant","readyListeners","checkMessages","request","resolveUrl","end","err","body","messageId","localStorage","getItem","id","setItem","openModal","props","__html","content","close","setInterval","initializeListeners","billingHistory","addToolbarComponent","openTab","key","editorComponentKey","title","ReportEditor","index","item","billedDate","toLocaleString","Math","round","items","ref","upgradeModalOpenned","updatePlan","startProgress","plan","creditsAvailable","stopProgress","forceUpdate","name","createdOn","email","marginLeft","openUpgradeModal","renderItems","renderItem","length","UpgradePlanModal","width","height","propTypes","func","isRequired","options","object","ReportsButton","openBilling","isAdmin","entity","cursor","ChangePasswordModal","state","data","newPassword","refs","newPassword1","value","oldPassword","post","newPassword2","code","setState","validationError","apiError","message","passwordError","validatePassword","color","display","changePassword"],"mappings":"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","file":"./studio/main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 9018f6f36d6bdf740b21\n **/","import Studio from 'jsreport-studio'\r\nimport BillingEditor from './BillingEditor.js'\r\nimport superagent from 'superagent'\r\nimport BillingButton from './BillingButton.js'\r\nimport ChangePasswordSettingsButton from './ChangePasswordSettingsButton.js'\r\n\r\nStudio.addEditorComponent('billing', BillingEditor)\r\n\r\nStudio.previewListeners.push(() => {\r\n  setTimeout(async () => {\r\n    const response = await Studio.api.get('/api/settings')\r\n    Studio.authentication.user.creditsUsed = response.tenant.creditsUsed\r\n  }, 5000)\r\n})\r\n\r\n\r\nStudio.readyListeners.push(async () => {\r\n  const checkMessages = async () => {    \r\n    const request = superagent.get(Studio.resolveUrl('/api/message'))\r\n    request.end((err, response) => {      \r\n      if (response && response.body) {\r\n        const messageId = localStorage.getItem('messageId')\r\n\r\n        if (messageId != response.body.id) {\r\n           localStorage.setItem('messageId', response.body.id)\r\n \r\n            Studio.openModal((props) => <div>\r\n                <div dangerouslySetInnerHTML={{ __html: response.body.content }}>\r\n                </div>\r\n                <div className='button-bar'>\r\n                  <button className='button confirmation' onClick={() => props.close()}>ok</button>\r\n                </div>\r\n              </div>)\r\n            }\r\n        }\r\n    })\r\n  }\r\n\r\n  setInterval(checkMessages, 5 * 60 * 1000)\r\n  checkMessages()\r\n})\r\n\r\nStudio.initializeListeners.push(async () => {\r\n  Studio.authentication.user.billingHistory = Studio.authentication.user.billingHistory || []\r\n\r\n  Studio.addToolbarComponent(BillingButton, 'right')\r\n  Studio.addToolbarComponent(() => <div\r\n    className='toolbar-button'\r\n    onClick={() => Studio.openTab({ key: 'Billing', editorComponentKey: 'billing', title: 'Billing' })}>\r\n    <i className='fa fa-usd' /> Billing\r\n  </div>, 'settings')\r\n\r\n  Studio.addToolbarComponent(ChangePasswordSettingsButton, 'settings')\r\n})\r\n\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./studio/main_dev.js\n **/","module.exports = Studio;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"Studio\"\n ** module id = 1\n ** module chunks = 0\n **/","import ReactList from 'react-list'\r\nimport React, { Component} from 'react'\r\nimport Studio from 'jsreport-studio'\r\nimport UpgradePlanModal from './UpgradePlanModal.js'\r\n\r\nexport default class ReportEditor extends Component {\r\n  renderItem (index) {\r\n    const item = Studio.authentication.user.billingHistory[index]\r\n    return <tr key={index}>\r\n      <td>{item.billedDate.toLocaleString()}</td>\r\n      <td>{Math.round(item.creditsUsed / 1000)}</td>\r\n    </tr>\r\n  }\r\n\r\n  renderItems (items, ref) {\r\n    return <table className='table' ref={ref}>\r\n      <thead>\r\n        <tr>\r\n          <th>billed date</th>\r\n          <th>credits spent</th>\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        {items}\r\n      </tbody>\r\n    </table>\r\n  }\r\n\r\n  openUpgradeModal () {\r\n    this.upgradeModalOpenned = true\r\n    Studio.openModal(UpgradePlanModal, {})\r\n  }\r\n\r\n  componentDidMount () {\r\n    this.updatePlan()\r\n  }\r\n\r\n  async updatePlan () {\r\n    Studio.startProgress()\r\n    const response = await Studio.api.get('/api/settings')\r\n    Studio.authentication.user.plan = response.tenant.plan\r\n    Studio.authentication.user.creditsAvailable = response.tenant.creditsAvailable\r\n    Studio.stopProgress()\r\n    this.forceUpdate()\r\n  }\r\n\r\n  componentDidUpdate () {\r\n    if (this.upgradeModalOpenned) {\r\n      Studio.startProgress()\r\n      setTimeout(() => this.updatePlan(), 6000)\r\n    }\r\n\r\n    this.upgradeModalOpenned = false\r\n  }\r\n\r\n  render () {\r\n    return <div className='block custom-editor'>\r\n      <div>\r\n        <h1><i className='fa fa-home' /> {Studio.authentication.user.name} </h1>\r\n        <small>created on: {Studio.authentication.user.createdOn.toLocaleString()}</small>\r\n        <br />\r\n        <small>admin email: {Studio.authentication.user.email}</small>\r\n      </div>\r\n      <div>\r\n        <h2>current billing plan</h2>\r\n\r\n        <button style={{marginLeft: '0rem'}} className='button confirmation'>\r\n          {Studio.authentication.user.plan || 'free'} {Math.round(Studio.authentication.user.creditsUsed / 1000) + ' '}\r\n          / {Studio.authentication.user.creditsAvailable}\r\n        </button>\r\n\r\n        <button className='button confirmation' onClick={() => this.openUpgradeModal()}>\r\n          Upgrade plan\r\n        </button>\r\n\r\n        <a className='button confirmation' href='https://gumroad.com/library' target='_blank'>\r\n          Payment details\r\n        </a>\r\n\r\n        <a className='button danger' href='https://gumroad.com/library' target='_blank'>\r\n          Cancel subscription\r\n        </a>\r\n\r\n        <p>\r\n          <small>\r\n            We use <a href='https://gumroad.com' target='_blank'>gumroad.com</a> to mange jsreportonline payments and subscriptions.\r\n            If you have any issues with payments, please contact gumroad support.<br /> If the plan upgrade is not propagated after\r\n            several minutes, please contact jsreport support.<br /><br />\r\n\r\n            Please cancel the old subscription when upgrading between payed plans.\r\n          </small>\r\n        </p>\r\n      </div>\r\n      <div className='block-item'>\r\n        <h2>billing history</h2>\r\n        <ReactList type='uniform' itemsRenderer={this.renderItems} itemRenderer={(index) => this.renderItem(index)}\r\n          length={Studio.authentication.user.billingHistory.length} />\r\n      </div>\r\n    </div>\r\n  }\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./studio/BillingEditor.js\n **/","module.exports = Studio.libraries['react-list'];\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"Studio.libraries['react-list']\"\n ** module id = 3\n ** module chunks = 0\n **/","module.exports = Studio.libraries['react'];\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"Studio.libraries['react']\"\n ** module id = 4\n ** module chunks = 0\n **/","import React, {Component, PropTypes} from 'react'\r\nimport Studio from 'jsreport-studio'\r\n\r\nexport default class UpgradePlanModal extends Component {\r\n  static propTypes = {\r\n    close: PropTypes.func.isRequired,\r\n    options: PropTypes.object.isRequired\r\n  }\r\n\r\n  render () {\r\n    return <div style={{width:'710px', height: '640px'}}>\r\n      <iframe src='/gumroad.html' style={{width:'100%', height: '100%'}} frameBorder=\"0\" />\r\n    </div>\r\n  }\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./studio/UpgradePlanModal.js\n **/","module.exports = Studio.libraries['superagent'];\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"Studio.libraries['superagent']\"\n ** module id = 6\n ** module chunks = 0\n **/","import React, { Component } from 'react'\r\nimport Studio from 'jsreport-studio'\r\n\r\nexport default class ReportsButton extends Component {\r\n  openBilling () {\r\n    Studio.openTab({ key: 'Billing', editorComponentKey: 'billing', title: 'Billing' })\r\n  }\r\n\r\n  render () {\r\n    return <div onClick={() => this.openBilling()} className='toolbar-button'>\r\n      <i className='fa fa-usd' /> {Math.round(Studio.authentication.user.creditsUsed / 1000)} / {Studio.authentication.user.creditsAvailable}\r\n    </div>\r\n  }\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ./studio/BillingButton.js\n **/","import ChangePasswordModal from './ChangePasswordModal.js'\r\nimport Studio from 'jsreport-studio'\r\n\r\nexport default (props) => {\r\n  return Studio.authentication.user.isAdmin ? <div>\r\n    <a\r\n      id='changePassword'\r\n      onClick={() => Studio.openModal(ChangePasswordModal, { entity: Studio.authentication.user })}\r\n      style={{cursor: 'pointer'}}><i className='fa fa-key'></i> Change password\r\n    </a>\r\n  </div> : <div/>\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./studio/ChangePasswordSettingsButton.js\n **/","import React, {Component, PropTypes} from 'react'\r\nimport Studio from 'jsreport-studio'\r\n\r\nexport default class ChangePasswordModal extends Component {\r\n  static propTypes = {\r\n    close: PropTypes.func.isRequired,\r\n    options: PropTypes.object.isRequired\r\n  }\r\n\r\n  constructor () {\r\n    super()\r\n    this.state = {}\r\n  }\r\n\r\n  async changePassword () {\r\n    const { entity } = this.props.options\r\n    const { close } = this.props\r\n\r\n    try {\r\n      let data = {\r\n        newPassword: this.refs.newPassword1.value,\r\n        oldPassword: this.refs.oldPassword.value\r\n      }\r\n\r\n      const response = await Studio.api.post(`/api/password`, { data: data })\r\n\r\n      this.refs.newPassword1.value = ''\r\n      this.refs.newPassword2.value = ''\r\n\r\n      if (response.code !== 'ok') {\r\n        this.setState({ validationError: response.code })\r\n        return\r\n      }\r\n\r\n      close()\r\n    } catch (e) {\r\n      this.setState({ apiError: e.message })\r\n    }\r\n  }\r\n\r\n  validatePassword () {\r\n    this.setState(\r\n      {\r\n        passwordError: this.refs.newPassword2.value && this.refs.newPassword2.value !== this.refs.newPassword1.value,\r\n        apiError: null\r\n      })\r\n  }\r\n\r\n  render () {\r\n    return <div>\r\n      <div className='form-group'>\r\n        <label>old password</label>\r\n        <input type='password' ref='oldPassword' />\r\n      </div>\r\n      <div className='form-group'>\r\n        <label>new password</label>\r\n        <input type='password' ref='newPassword1' />\r\n      </div>\r\n      <div className='form-group'>\r\n        <label>new password verification</label>\r\n        <input type='password' ref='newPassword2' onChange={() => this.validatePassword()} />\r\n      </div>\r\n      <div className='form-group'>\r\n        <span style={{color: 'red', display: this.state.validationError ? 'block' : 'none'}}>{this.state.validationError}</span>\r\n        <span style={{color: 'red', display: this.state.passwordError ? 'block' : 'none'}}>password doesn't match</span>\r\n        <span style={{color: 'red', display: this.state.apiError ? 'block' : 'none'}}>{this.state.apiError}</span>\r\n      </div>\r\n      <div className='button-bar'>\r\n        <button className='button confirmation' onClick={() => this.changePassword()}>ok</button>\r\n      </div>\r\n    </div>\r\n  }\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./studio/ChangePasswordModal.js\n **/"],"sourceRoot":""}
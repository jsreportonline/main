{"version":3,"sources":["webpack:///webpack/bootstrap fcb07beb006f4bb1c235","webpack:///./studio/main_dev.js","webpack:///external \"Studio\"","webpack:///./studio/BillingEditor.js","webpack:///external \"Studio.libraries['react-list']\"","webpack:///external \"Studio.libraries['react']\"","webpack:///./studio/BillingButton.js","webpack:///./studio/ChangePasswordSettingsButton.js","webpack:///./studio/ChangePasswordModal.js"],"names":["addEditorComponent","previewListeners","push","setTimeout","api","get","response","authentication","user","timeSpent","tenant","initializeListeners","billingHistory","addToolbarComponent","openTab","key","editorComponentKey","title","ReportEditor","index","item","billedDate","toLocaleString","creditsSpent","items","ref","name","createdOn","email","marginLeft","plan","Math","round","creditsAvailable","console","log","renderItems","renderItem","length","ReportsButton","openBilling","props","isAdmin","openModal","entity","cursor","ChangePasswordModal","state","options","close","data","newPassword","refs","newPassword1","value","oldPassword","post","newPassword2","code","setState","validationError","apiError","message","passwordError","validatePassword","color","display","changePassword","propTypes","func","isRequired","object"],"mappings":"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","file":"./studio/main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap fcb07beb006f4bb1c235\n **/","import Studio from 'jsreport-studio'\r\nimport BillingEditor from './BillingEditor.js'\r\nimport BillingButton from './BillingButton.js'\r\nimport ChangePasswordSettingsButton from './ChangePasswordSettingsButton.js'\r\n\r\nStudio.addEditorComponent('billing', BillingEditor)\r\n\r\nStudio.previewListeners.push(() => {\r\n  setTimeout(async () => {\r\n    const response = await Studio.api.get('/api/settings')\r\n    Studio.authentication.user.timeSpent = response.tenant.timeSpent\r\n  }, 5000)\r\n})\r\n\r\nStudio.initializeListeners.push(async () => {\r\n  Studio.authentication.user.billingHistory = Studio.authentication.user.billingHistory || []\r\n\r\n  Studio.addToolbarComponent(BillingButton, 'right')\r\n  Studio.addToolbarComponent(() => <div\r\n    className='toolbar-button'\r\n    onClick={() => Studio.openTab({ key: 'Billing', editorComponentKey: 'billing', title: 'Billing' })}>\r\n    <i className='fa fa-usd' /> Billing\r\n  </div>, 'settings')\r\n\r\n  Studio.addToolbarComponent(ChangePasswordSettingsButton, 'settings')\r\n})\r\n\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./studio/main_dev.js\n **/","module.exports = Studio;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"Studio\"\n ** module id = 1\n ** module chunks = 0\n **/","import ReactList from 'react-list'\r\nimport React, { Component} from 'react'\r\nimport Studio from 'jsreport-studio'\r\n\r\nexport default class ReportEditor extends Component {\r\n  renderItem (index) {\r\n    const item = Studio.authentication.user.billingHistory[index]\r\n    return <tr key={index}>\r\n      <td>{item.billedDate.toLocaleString()}</td>\r\n      <td>{item.creditsSpent}</td>\r\n    </tr>\r\n  }\r\n\r\n  renderItems (items, ref) {\r\n    return <table className='table' ref={ref}>\r\n      <thead>\r\n        <tr>\r\n          <th>billed date</th>\r\n          <th>credits spent</th>\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        {items}\r\n      </tbody>\r\n    </table>\r\n  }\r\n\r\n  render () {\r\n    return <div className='block custom-editor'>\r\n      <div>\r\n        <h1><i className='fa fa-home' /> {Studio.authentication.user.name} </h1>\r\n        <small>created on: {Studio.authentication.user.createdOn.toLocaleString()}</small><br/>\r\n        <small>admin email: {Studio.authentication.user.email}</small>\r\n      </div>\r\n      <div>\r\n        <h2>current billing plan</h2>\r\n\r\n        <button style={{marginLeft: '0rem'}} className='button confirmation'>\r\n          {Studio.authentication.user.plan || 'free'} {Math.round(Studio.authentication.user.timeSpent / 1000)} / {Studio.authentication.user.creditsAvailable}\r\n        </button>\r\n\r\n        <button className='button confirmation' onClick={() => console.log('click')}>\r\n          Upgrade plan\r\n        </button>\r\n\r\n        <a className='button danger' href='https://gumroad.com/library' target='_blank'>\r\n          Cancel subscription\r\n        </a>\r\n      </div>\r\n      <div className='block-item'>\r\n        <h2>billing history</h2>\r\n        <ReactList type='uniform' itemsRenderer={this.renderItems} itemRenderer={(index) => this.renderItem(index)} length={Studio.authentication.user.billingHistory.length} />\r\n      </div>\r\n    </div>\r\n  }\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ./studio/BillingEditor.js\n **/","module.exports = Studio.libraries['react-list'];\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"Studio.libraries['react-list']\"\n ** module id = 3\n ** module chunks = 0\n **/","module.exports = Studio.libraries['react'];\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"Studio.libraries['react']\"\n ** module id = 4\n ** module chunks = 0\n **/","import React, { Component } from 'react'\r\nimport Studio from 'jsreport-studio'\r\n\r\nexport default class ReportsButton extends Component {\r\n  openBilling () {\r\n    Studio.openTab({ key: 'Billing', editorComponentKey: 'billing', title: 'Billing' })\r\n  }\r\n\r\n  render () {\r\n    return <div onClick={() => this.openBilling()} className='toolbar-button'>\r\n      <i className='fa fa-usd' /> {Math.round(Studio.authentication.user.timeSpent / 1000)} / {Studio.authentication.user.creditsAvailable}\r\n    </div>\r\n  }\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ./studio/BillingButton.js\n **/","import ChangePasswordModal from './ChangePasswordModal.js'\r\nimport Studio from 'jsreport-studio'\r\n\r\nexport default (props) => {\r\n  return Studio.authentication.user.isAdmin ? <div>\r\n    <a\r\n      id='changePassword'\r\n      onClick={() => Studio.openModal(ChangePasswordModal, { entity: Studio.authentication.user })}\r\n      style={{cursor: 'pointer'}}><i className='fa fa-key'></i> Change password\r\n    </a>\r\n  </div> : <div/>\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./studio/ChangePasswordSettingsButton.js\n **/","import React, {Component, PropTypes} from 'react'\r\nimport Studio from 'jsreport-studio'\r\n\r\nexport default class ChangePasswordModal extends Component {\r\n  static propTypes = {\r\n    close: PropTypes.func.isRequired,\r\n    options: PropTypes.object.isRequired\r\n  }\r\n\r\n  constructor () {\r\n    super()\r\n    this.state = {}\r\n  }\r\n\r\n  async changePassword () {\r\n    const { entity } = this.props.options\r\n    const { close } = this.props\r\n\r\n    try {\r\n      let data = {\r\n        newPassword: this.refs.newPassword1.value,\r\n        oldPassword: this.refs.oldPassword.value\r\n      }\r\n\r\n      const response = await Studio.api.post(`/api/password`, { data: data })\r\n\r\n      this.refs.newPassword1.value = ''\r\n      this.refs.newPassword2.value = ''\r\n\r\n      if (response.code !== 'ok') {\r\n        this.setState({ validationError: response.code })\r\n        return\r\n      }\r\n\r\n      close()\r\n    } catch (e) {\r\n      this.setState({ apiError: e.message })\r\n    }\r\n  }\r\n\r\n  validatePassword () {\r\n    this.setState(\r\n      {\r\n        passwordError: this.refs.newPassword2.value && this.refs.newPassword2.value !== this.refs.newPassword1.value,\r\n        apiError: null\r\n      })\r\n  }\r\n\r\n  render () {\r\n    return <div>\r\n      <div className='form-group'>\r\n        <label>old password</label>\r\n        <input type='password' ref='oldPassword' />\r\n      </div>\r\n      <div className='form-group'>\r\n        <label>new password</label>\r\n        <input type='password' ref='newPassword1' />\r\n      </div>\r\n      <div className='form-group'>\r\n        <label>new password verification</label>\r\n        <input type='password' ref='newPassword2' onChange={() => this.validatePassword()} />\r\n      </div>\r\n      <div className='form-group'>\r\n        <span style={{color: 'red', display: this.state.validationError ? 'block' : 'none'}}>{this.state.validationError}</span>\r\n        <span style={{color: 'red', display: this.state.passwordError ? 'block' : 'none'}}>password doesn't match</span>\r\n        <span style={{color: 'red', display: this.state.apiError ? 'block' : 'none'}}>{this.state.apiError}</span>\r\n      </div>\r\n      <div className='button-bar'>\r\n        <button className='button confirmation' onClick={() => this.changePassword()}>ok</button>\r\n      </div>\r\n    </div>\r\n  }\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./studio/ChangePasswordModal.js\n **/"],"sourceRoot":""}